<main class="campaigns-main">
  <div class="campaigns-container">
    <!-- Header -->
    <div class="campaigns-header">
      <div>
        <h2 class="campaigns-title">Campaigns</h2>
        <p class="campaigns-subtitle">
          Manage your research campaigns and studies
        </p>
      </div>

      <button class="btn-primary">
        <span class="btn-icon">
          <lucide-icon [name]="addButton.icon"></lucide-icon>
        </span>
        <span>{{ addButton.label }}</span>
      </button>
    </div>

    <!-- Filters -->
    <div class="campaigns-filters">
      <div class="search-wrapper">
        <span class="search-icon">
          <lucide-icon name="search"></lucide-icon>
        </span>
        <input type="text" [placeholder]="filters.searchPlaceholder" class="search-input" [(ngModel)]="searchFilterBykey" (keyup)="searchFilter($event)" />
      </div>

      <select class="select">
      @for (opt of filters.statusOptions; track $index) {
        <option>{{ opt }}</option>
      }
      </select>

      <select class="select">
      @for (opt of filters.sortOptions; track $index) {
        <option>{{ opt }}</option>
      }
      </select>
    </div>

    <!-- Cards grid -->
    <div class="campaigns-grid">
      @for (c of filteredRows; track $index) {
      <div class="campaign-card">
        <div class="campaign-card-header">
          <div class="campaign-card-title-block">
            <h3 class="campaign-name">{{ c.title }}</h3>
            <p class="campaign-code">{{ c.code }}</p>
          </div>
          <div class="campaign-status-block">
            <span [ngClass]="badgeClass(c.status)">{{ c.status }}</span>
            <button class="icon-button">
              <lucide-icon name="ellipsis-vertical"></lucide-icon>
            </button>
          </div>
        </div>

        <div class="campaign-progress">
          <div class="campaign-progress-row">
            <span class="campaign-progress-label">Progress</span>
            <span class="campaign-progress-value">
              {{ c.progressLabel }}
            </span>
          </div>
          <div class="progress">
            <div class="progress-bar" [style.width.%]="c.progressPercent"></div>
          </div>
          <div class="campaign-progress-percent">
            {{ c.progressPercent }}%
          </div>
        </div>

        <div class="campaign-meta-grid">
          <div class="meta-item">
            <p class="meta-label">Providers</p>
            <p class="meta-value">{{ c.providers }}</p>
          </div>
          <div class="meta-item">
            <p class="meta-label">Avg CPI</p>
            <p class="meta-value">{{ c.avgCpi }}</p>
          </div>
          <div class="meta-item">
            <p class="meta-label">Total Spend</p>
            <p class="meta-value">{{ c.totalSpend }}</p>
          </div>
        </div>

        <div class="campaign-actions">
          <!-- primary action (Pause / Resume), hidden for completed -->
          @if(showPrimary(c.status)){ <button class="btn-outline-warning">
            <lucide-icon [name]="primaryActionIcon(c.status)"></lucide-icon>
            <span>{{ primaryActionLabel(c.status) }}</span>
          </button>
          }
          <button class="btn-outline">
            <lucide-icon name="settings"></lucide-icon>
            <span>Configure</span>
          </button>
        </div>
      </div>
      }
    </div>
  </div>
</main>